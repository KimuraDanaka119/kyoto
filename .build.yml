image: alpine/edge
packages:
  - go
  - git
  - curl
  - bash
sources:
  - https://git.sr.ht/~kyoto-framework/kyoto
tasks:
  - taskfile: |
      GOBIN=/home/build/ go install github.com/go-task/task/v3/cmd/task@latest
  - test: |
      cd kyoto
      /home/build/task test
  - coverage: |
      cd kyoto
      /home/build/task test:cov:report -- coverage.txt
  - codecov: |
      cd kyoto
      curl https://codecov.io/bash | bash
